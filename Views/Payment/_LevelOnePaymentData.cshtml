@using System.Data
@using FP.Manager
@{
    DataSet ds = new DataSet();
    DataTable dtg = new DataTable();
    DataTable dtm = new DataTable();
    if (Model != null)
    {
        //ds = Model;
        dtg = Model;
    }
    DataView view = new DataView(dtg);//.Select("EmpName<>'_All' And Emp_ID<>'__All'"
    DataTable dtsn = view.ToTable(true, "EmpName");
    DataTable dtts = view.ToTable(true, "Emp_ID");
}
<style>
    .trdisableAprroved {
        color: #fff;
        pointer-events: none !important;
        background-color: #478718 !important
    }

    .trdisableReject {
        color: #fff;
        /*pointer-events: none !important;*/
        background-color: #b72525 !important
    }

    .trcolor {
        color: #000;
    }
    .table-bordered > tbody > tr:hover {
        background: white;
        color: black;
    }
</style>
<div class="row row-deck">
    <div class="col-lg-12 col-md-12">
        <div class="card">
            <div class="table-responsive">

                <table class="table table-bordered dt-responsive display" id="DataList" bSort="false" width="100%">
                    <thead>
                        <tr>
                            <th>@CommonModel.DisAchvlbl.Name</th>
                            <th>@CommonModel.DisAchvlbl.TotalNoofParticipant</th>
                            <th>@CommonModel.DisAchvlbl.ClaimAmount</th>
                            <th>@CommonModel.DisAchvlbl.ApproveAmount</th>
                            <th>Peer group meeting</th>
                            <th>Home Visit</th>
                            <th>Linkage of beneficiary with health service provider</th>
                            <th>Participated in FP campaign</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int sno = 1; int indx = 1;
                            if (dtg.Rows.Count > 0)
                            {
                                foreach (DataRow dr in dtg.Rows)
                                {
                                    var clam = 0;var appvam = 0;
                                    string EmpName = Convert.ToString(dr["EmpName"]);
                                    string Emp_ID = Convert.ToString(dr["Emp_ID"]);

                                    if (!string.IsNullOrWhiteSpace(Emp_ID.ToLower()) && !string.IsNullOrWhiteSpace(EmpName.ToLower()))
                                    {
                                        DataTable dtcount = FP.Manager.SP_Model.SP_GetAchvPlanApproveChild("", dr["Emp_ID"].ToString(),
                                            Convert.ToInt32(dr["PlanMonth"].ToString()), Convert.ToInt32(dr["PlanYear"].ToString()), (int)(Enums.eTypeLayer.MRP));
                                        var dtnoAppvd = dtcount.AsEnumerable().Where(x => x.Field<int?>("IsLevel1Approve") == 1);
                                        if (dtnoAppvd.Count() > 0)
                                        {
                                            appvam = CommonModel.GetClaimApprove(dtnoAppvd.Count(), CommonModel.RoleNameCont.CNRP);
                                        }
                                        else
                                        {
                                            appvam = CommonModel.GetClaimApprove(Convert.ToInt32(dr["Peer group meeting"]), CommonModel.RoleNameCont.CNRP);
                                        }
                                        clam = CommonModel.GetClaimApprove(Convert.ToInt32(dr["Peer group meeting"]), CommonModel.RoleNameCont.CNRP);
                                        <tr style="color:#1b6907;" data-empid="@Emp_ID">
                                            <td data-title="EmpName" class="@("empname-" + EmpName.Replace(" ", "_").ToLower())">@EmpName</td>
                                            <td data-title="NoOfMeetingHeld">@dr["NoOfMeetingHeld"]</td>
                                            <td data-title="@CommonModel.DisAchvlbl.ClaimAmount">
                                                @clam
                                            </td>
                                            <td data-title="@CommonModel.DisAchvlbl.ApproveAmount">
                                                <strong id="appvamount-@Emp_ID">@appvam</strong>
                                            </td>
                                            <td>@dr["Peer group meeting"]</td>
                                            <td>@dr["Home Visit"]</td>
                                            <td>@dr["Linkage of beneficiary with health service provider"]</td>
                                            <td>@dr["Participated in FP campaign"]</td>
                                            <td><a href="javascript:void(0);" class="btn btn-primary" onclick="AchievementDetailsByUser('@dr["Emp_ID"].ToString()','@dr["EmpName"].ToString()')" >Details</a></td>
                                        </tr>
                                    }
                                    @*if (Emp_ID.ToLower() != "")
                                    {
                                        if (!string.IsNullOrWhiteSpace(dr["PlanMonthYear"].ToString()))
                                        {
                                            var mysplit = dr["PlanMonthYear"].ToString().Split('/');
                                            
                                        }
                                    }*@
                                }
                            }
                            else
                            {
                                <tr><td colspan="11" class="text-danger text-center"><strong>@(Enums.GetEnumDescription(Enums.eReturnReg.RecordNotFound))</strong></td></tr>
                            }
                        }

                    </tbody>

                </table>
                @*@{
                    foreach (DataRow dr in dtsn.Rows)
                    {
                        string group = "empname-" + Convert.ToString(dr["EmpName"]).ToLower();
                        <script>
                                CreateGroup('@group');
                        </script>
                    }
                }*@
            </div>
        </div>
    </div>
</div>

